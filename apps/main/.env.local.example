# Supabase Configuration
# 
# ⚠️ IMPORTANT: This is a MONOREPO with multiple Next.js apps!
# Each app needs its own .env.local file with the SAME credentials.
# See ENV_SETUP_GUIDE.md for detailed setup instructions.
#
# To set up Supabase authentication:
# 1. Create a project at https://supabase.com
# 2. Go to Project Settings > API
# 3. Copy your Project URL and anon/public key
# 4. Create a .env.local file (copy this file) and add your values
# 5. Copy the same credentials to each learning module's .env.local
# 6. Never commit .env.local to git (it's in .gitignore)
#
# For Google OAuth setup, see GOOGLE_OAUTH_TROUBLESHOOTING.md

# Your Supabase project URL
# Example: https://xyzcompany.supabase.co
# ⚠️ REQUIRED - App will not start without this (unless SUPABASE_SUSPENDED=true)
NEXT_PUBLIC_SUPABASE_URL=your-project-url-here

# Your Supabase anonymous/public key
# This key is safe to use in the browser
# ⚠️ REQUIRED - App will not start without this (unless SUPABASE_SUSPENDED=true)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# ============================================
# Supabase Suspension Mode (TEMPORARY)
# ============================================
#
# Set to "true" to suspend all Supabase connections temporarily
# This allows the app to run without database access for content review
# 
# When suspended:
# - All authentication operations will be disabled
# - Database queries will return empty results
# - Apps will show content without requiring login
# - No data will be read from or written to Supabase
#
# Development: false (default - use Supabase normally)
# Temporary suspension: true (disable Supabase for content review)
#
# ⚠️ IMPORTANT: This is a temporary feature for content review periods
# Set back to "false" and restart apps when ready to restore Supabase
NEXT_PUBLIC_SUPABASE_SUSPENDED=false

# Site URL for OAuth redirects
# Development: http://localhost:3000
# Production: https://iiskills.cloud
# IMPORTANT: This must match one of the redirect URLs configured in Supabase
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# Main domain (for production)
# Used for generating correct URLs across subdomains
# Example: iiskills.cloud
NEXT_PUBLIC_MAIN_DOMAIN=iiskills.cloud

# Cookie domain for cross-subdomain authentication
# Development: Leave empty or undefined (cookies work on localhost)
# Production: .iiskills.cloud (note the leading dot - enables cross-subdomain auth)
# CRITICAL: The leading dot allows session sharing across all *.iiskills.cloud subdomains
NEXT_PUBLIC_COOKIE_DOMAIN=

# For production deployment, set:
# NEXT_PUBLIC_COOKIE_DOMAIN=.iiskills.cloud
# NEXT_PUBLIC_SITE_URL=https://iiskills.cloud

# ============================================
# Universal reCAPTCHA Configuration
# ============================================
#
# IMPORTANT: Use the SAME reCAPTCHA keys across ALL apps and subdomains
# This enables unified bot protection across the entire iiskills.cloud platform.
#
# CURRENT USAGE: Newsletter signups
# FUTURE USAGE: Registration, authentication, login, password reset forms
#
# Google reCAPTCHA v3 keys for universal usage
# Get your keys at: https://www.google.com/recaptcha/admin/create
# Choose reCAPTCHA v3 for invisible verification
#
# Setup Instructions:
# 1. Register a SINGLE site key for iiskills.cloud (this covers ALL subdomains)
# 2. In the reCAPTCHA admin console, add:
#    - Domain: iiskills.cloud (wildcard covers all *.iiskills.cloud subdomains)
# 3. Copy the SAME keys to ALL apps' .env.local files
# 4. All frontend forms (newsletter, and future auth/registration) will use these keys
# 5. All backend APIs will validate using the same secret key
#
# Public site key (visible in browser, same across all apps)
NEXT_PUBLIC_RECAPTCHA_SITE_KEY=your-recaptcha-site-key-here

# Secret key (server-side only, never exposed to browser, same across all apps)
# ⚠️ IMPORTANT: Keep this secret!
RECAPTCHA_SECRET_KEY=your-recaptcha-secret-key-here

# ============================================
# Google OAuth Configuration Notes
# ============================================
# 
# After setting up the above, configure Google OAuth:
#
# 1. Enable Google provider in Supabase:
#    - Supabase Dashboard → Authentication → Providers → Google
#    - Toggle "Enable Sign in with Google" to ON
#
# 2. Configure Google Cloud Console:
#    - Create OAuth 2.0 Client ID (Web application)
#    - Add Supabase callback URL to Authorized redirect URIs:
#      https://YOUR-PROJECT-ID.supabase.co/auth/v1/callback
#    - Add all domains to Authorized JavaScript origins
#      (see CALLBACK_URLS_REFERENCE.md for complete list)
#
# 3. Copy Client ID and Secret from Google Console to Supabase
#
# 4. Add redirect URLs to Supabase URL Configuration:
#    - Development: http://localhost:3000/**
#    - Production: https://iiskills.cloud/**
#    - Plus all subdomains (see CALLBACK_URLS_REFERENCE.md)
#
# For detailed troubleshooting, see:
# - GOOGLE_OAUTH_TROUBLESHOOTING.md
# - CALLBACK_URLS_REFERENCE.md
# - Run: ./google-oauth-check.sh to verify configuration
