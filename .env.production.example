# Production Environment Configuration
# 
# ═══════════════════════════════════════════════════════════════
# ⚠️  CRITICAL: PRODUCTION SECURITY CONFIGURATION
# ═══════════════════════════════════════════════════════════════
#
# This file contains the PRODUCTION-READY configuration for iiskills-cloud.
# ALL debug modes, test modes, and bypass flags are DISABLED for security.
#
# BEFORE LAUNCH CHECKLIST:
# ✓ All credentials rotated and stored securely
# ✓ All debug flags set to false
# ✓ All test modes disabled
# ✓ HTTPS/TLS configured
# ✓ Security headers enabled
# ✓ Rate limiting configured
# ✓ Monitoring and alerting active
# ✓ Backup and recovery tested
#
# ═══════════════════════════════════════════════════════════════

# ============================================
# Supabase Configuration (REQUIRED)
# ============================================
# Get these from: https://supabase.com → Project Settings → API
# ⚠️  ROTATE these keys before production launch

NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-production-anon-key-here

# Service Role Key (Server-side only - KEEP SECRET!)
# ⚠️  CRITICAL: This key bypasses Row Level Security
# Only use in secure server-side code, never expose to client
SUPABASE_SERVICE_ROLE_KEY=your-production-service-role-key-here

# ============================================
# PRODUCTION SECURITY FLAGS
# ============================================
# ⚠️  CRITICAL: All debug/test/bypass modes MUST be false

# Supabase Connection (MUST BE false IN PRODUCTION)
NEXT_PUBLIC_SUPABASE_SUSPENDED=false

# Local Content Mode (MUST BE false IN PRODUCTION)
NEXT_PUBLIC_USE_LOCAL_CONTENT=false

# Authentication (MUST BE false IN PRODUCTION - enables auth requirement)
NEXT_PUBLIC_DISABLE_AUTH=false

# Paywall (MUST BE true IN PRODUCTION - enables payment requirements)
NEXT_PUBLIC_PAYWALL_ENABLED=true

# Open Access Mode (MUST BE false IN PRODUCTION)
OPEN_ACCESS=false

# Admin Debug Mode (MUST BE false IN PRODUCTION)
DEBUG_ADMIN=false
NEXT_PUBLIC_DEBUG_ADMIN=false

# Test Mode (MUST BE false IN PRODUCTION)
NEXT_PUBLIC_TEST_MODE=false
TEST_MODE=false

# Admin Setup Mode (MUST BE false IN PRODUCTION)
NEXT_PUBLIC_ADMIN_SETUP_MODE=false
ADMIN_SETUP_MODE=false

# Temporary Auth Suspension (MUST BE false IN PRODUCTION)
NEXT_PUBLIC_TEMP_SUSPEND_AUTH=false
TEMP_SUSPEND_AUTH=false
ADMIN_SUSPEND_CONFIRM=false

# ============================================
# Admin Authentication (Production)
# ============================================
# ⚠️  Generate a new JWT secret: openssl rand -base64 64
# ⚠️  Rotate this secret regularly (every 90 days)

ADMIN_JWT_SECRET=your-secure-jwt-secret-minimum-32-characters-here
ADMIN_SESSION_SIGNING_KEY=your-secure-session-signing-key-here

# Admin Panel Secret (passphrase for admin access)
# ⚠️  CHANGE from default 'iiskills123'
ADMIN_PANEL_SECRET=change-this-to-a-strong-passphrase

# Admin Auth Disabled flag — MUST be absent or "false" in production.
# Only set to "true" for local dev or sandbox deployments.
# ADMIN_AUTH_DISABLED=false

# Admin Gate Disabled flag — MUST be absent or "false" in production.
# NEXT_PUBLIC_DISABLE_ADMIN_GATE=false

# Optional: restrict admin panel to specific IPs (comma-separated)
# Leave empty to allow all IPs (then rely on passphrase + session cookie)
# ADMIN_IP_ALLOWLIST=1.2.3.4,5.6.7.8

# Admin Secret Password (if used)
# ⚠️  CHANGE from default 'iiskills123'
# ⚠️  Use a strong, unique password
# ⚠️  Better: Use Supabase auth only (remove this variable)
# NEXT_PUBLIC_ADMIN_SECRET_PASSWORD=

# Rate limiting (optional overrides — defaults are conservative)
# RATE_LIMIT_WINDOW_MS=60000
# RATE_LIMIT_AUTH_MAX=10
# RATE_LIMIT_PAYMENT_MAX=5
# RATE_LIMIT_ADMIN_MAX=30

# ============================================
# Domain Configuration (Production)
# ============================================

# Production site URL
NEXT_PUBLIC_SITE_URL=https://iiskills.cloud

# Main domain (without protocol)
NEXT_PUBLIC_MAIN_DOMAIN=iiskills.cloud

# Cookie domain for cross-subdomain authentication
# ⚠️  Note the leading dot - enables sharing across *.iiskills.cloud
NEXT_PUBLIC_COOKIE_DOMAIN=.iiskills.cloud

# ============================================
# Payment Gateway - Razorpay (Production)
# ============================================
# Get these from: https://dashboard.razorpay.com/app/keys
# ⚠️  Use LIVE MODE credentials (rzp_live_*)
# ⚠️  ROTATE these keys before production launch
#
# Test mode: set RAZORPAY_MODE=test and use rzp_test_* keys to run
# payment tests in a production deployment without risking real charges.
# The /api/pay endpoint will reject live keys when RAZORPAY_MODE=test.
#
# For production go-live, set RAZORPAY_MODE=live (or leave unset) and
# replace the test keys below with your rzp_live_* credentials.

RAZORPAY_KEY_ID=rzp_live_your_key_id_here
RAZORPAY_KEY_SECRET=your_live_key_secret_here
RAZORPAY_WEBHOOK_SECRET=your_live_webhook_secret_here

# Payment mode: "test" (safe, no real charges) or "live" (real charges)
# Default: derived from key prefix (rzp_test_* → test, rzp_live_* → live)
RAZORPAY_MODE=live

# Webhook URL: https://iiskills.cloud/api/payment/webhook
# Events to subscribe: payment.captured, payment.failed

# ============================================
# Email - SendGrid (Production)
# ============================================
# Get API key from: https://app.sendgrid.com/settings/api_keys
# ⚠️  Use a key with "Mail Send" permission only
# ⚠️  ROTATE this key before production launch

SENDGRID_API_KEY=your-production-sendgrid-api-key-here

# Optional: Unsubscribe Group ID
SENDGRID_UNSUBSCRIBE_GROUP_ID=your-unsubscribe-group-id

# Sender configuration
# ⚠️  MUST be verified in SendGrid dashboard
SENDER_EMAIL=newsletter@iiskills.cloud
SENDER_NAME=iiskills.cloud

# ============================================
# AI Services (Production)
# ============================================
# Get from: https://platform.openai.com/api-keys
# ⚠️  Set spending limits to prevent abuse
# ⚠️  ROTATE this key before production launch

OPENAI_API_KEY=your-production-openai-api-key-here

# ============================================
# Bot Protection - reCAPTCHA v3 (Production)
# ============================================
# Get from: https://www.google.com/recaptcha/admin/create
# Domain: iiskills.cloud (covers all *.iiskills.cloud subdomains)
# ⚠️  Use production-specific keys

NEXT_PUBLIC_RECAPTCHA_SITE_KEY=your-production-recaptcha-site-key-here
RECAPTCHA_SECRET_KEY=your-production-recaptcha-secret-key-here

# ============================================
# Optional APIs (Production)
# ============================================
# These are optional - apps work with mock data if not provided

# Job/Internship APIs (Adzuna)
NEXT_PUBLIC_ADZUNA_APP_ID=your-adzuna-app-id-here
NEXT_PUBLIC_ADZUNA_API_KEY=your-adzuna-api-key-here

# News API
NEXT_PUBLIC_NEWS_API_KEY=your-newsapi-key-here

# Gemini API (backup for OpenAI)
GEMINI_API_KEY=your-gemini-api-key-here

# ============================================
# Client-Side Protection (Optional)
# ============================================
# Enable anti-copy protections on sensitive content pages
# Set to 'true' to enable right-click disable, text selection disable, etc.
# NOTE: This is a deterrent, not foolproof protection

NEXT_PUBLIC_ENABLE_COPY_PROTECTION=false

# ============================================
# Monitoring & Logging (Production)
# ============================================
# Configure your monitoring services here

# Log level (production should be 'error' or 'warn')
LOG_LEVEL=error

# Sentry DSN (if using Sentry for error tracking)
# NEXT_PUBLIC_SENTRY_DSN=
# SENTRY_AUTH_TOKEN=

# ============================================
# PRODUCTION DEPLOYMENT VERIFICATION
# ============================================
#
# Before going live, verify:
#
# 1. Credentials & Secrets:
#    □ All credentials rotated from development values
#    □ Service role key stored securely (never in client code)
#    □ Webhook secrets configured in Razorpay dashboard
#    □ All API keys have spending/rate limits set
#
# 2. Security Flags:
#    □ DEBUG_ADMIN=false
#    □ NEXT_PUBLIC_DISABLE_AUTH=false
#    □ NEXT_PUBLIC_PAYWALL_ENABLED=true
#    □ OPEN_ACCESS=false
#    □ All test modes disabled
#
# 3. Infrastructure:
#    □ HTTPS/TLS certificate configured and valid
#    □ Security headers enabled in Next.js config
#    □ Rate limiting configured at CDN/WAF level
#    □ Firewall rules configured (only necessary ports open)
#    □ DDoS protection enabled
#
# 4. Database:
#    □ Row Level Security (RLS) policies tested and enabled
#    □ Database backups automated and tested
#    □ Connection pooling configured
#    □ SSL/TLS required for connections
#
# 5. Monitoring:
#    □ Error tracking configured (Sentry, etc.)
#    □ Performance monitoring active
#    □ Uptime monitoring configured
#    □ Failed login monitoring enabled
#    □ Unusual activity alerts configured
#
# 6. Deployment:
#    □ Source maps disabled in production
#    □ Code obfuscation/minification enabled
#    □ Unnecessary dependencies removed
#    □ Build size optimized
#
# 7. Legal & Compliance:
#    □ Terms of Service published
#    □ Privacy Policy published
#    □ Cookie policy implemented
#    □ GDPR compliance verified (if applicable)
#    □ PCI DSS compliance verified (payment handling)
#
# 8. Testing:
#    □ Penetration testing completed
#    □ Security audit completed
#    □ Load testing completed
#    □ Payment flow tested end-to-end
#    □ Backup/restore tested
#
# ═══════════════════════════════════════════════════════════════
# END OF PRODUCTION CONFIGURATION
# ═══════════════════════════════════════════════════════════════
