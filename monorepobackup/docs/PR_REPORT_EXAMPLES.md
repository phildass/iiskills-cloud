# Example PR Reports

This document provides examples of auto-generated PR reports for both passing and failing scenarios.

---

## Example 1: Passing PR with Full Compliance

### PR Information
- **Title:** Add user authentication middleware for API routes
- **Author:** @developer1
- **Related Issues:** Closes #456, Related to #389
- **Files Changed:** 8
- **Lines Added:** 245
- **Lines Deleted:** 12

### Automated Requirements Analysis Report

#### ğŸ“Š Change Statistics

- **Files Changed**: 8
- **Lines Added**: 245
- **Lines Deleted**: 12
- **Test Files**: 3
- **Documentation Files**: 2

#### âœ… Requirements Checklist

- âœ… **Linked to Issues**: #456, #389 [OK]
- âœ… **Uses shared packages only**: [OK]
- âœ… **Proper package imports** (@iiskills/ui): 12 proper imports found
- âœ… **No .env files committed**: [OK]
- âœ… **No prohibited patterns**: [OK]
- âœ… **Tests included**: 3 test files updated
- âœ… **E2E/regression tests**: All 24 tests passed
- âœ… **Code quality**: ESLint & Prettier passed
- âœ… **Security scan**: No vulnerabilities found
- âœ… **Configuration validation**: [OK]
- âœ… **Screenshot diffs**: N/A (no UI changes)
- âœ… **Manual review**: [PENDING]

#### ğŸ¯ Detailed Analysis

**Import Analysis:**
```
âœ… All imports use proper package structure
âœ… Found 12 imports from @iiskills/ui
âœ… No deprecated app references
âœ… No local component imports
```

**Test Coverage:**
```
âœ… Unit tests: 38 passed
âœ… E2E tests: 24 passed (chromium, firefox, webkit)
âœ… Visual regression: N/A
```

**Security Analysis:**
```
âœ… No hardcoded secrets detected
âœ… No usage of eval()
âœ… No dangerouslySetInnerHTML
âœ… npm audit: 0 vulnerabilities
```

**Code Quality:**
```
âœ… ESLint: 0 errors, 0 warnings
âœ… Prettier: All files formatted
âœ… 0 console.log statements
âœ… 2 TODO comments (acceptable)
```

#### ğŸ’¡ Recommendations

âœ¨ **Excellent!** This PR follows all major guidelines and best practices.

**Highlights:**
- Comprehensive test coverage
- Well-documented changes
- Proper use of shared packages
- Clean security scan
- Updated documentation

#### ğŸš€ Next Steps

1. âœ… All automated checks passed
2. âœ… Ready for human review
3. â³ Awaiting reviewer approval
4. â³ Manual edge case verification needed

#### ğŸ“ Reviewer Guidance

This PR is ready for review. Please focus on:
- Verify authentication logic handles edge cases
- Test token expiration scenarios
- Confirm error messages are user-friendly
- Check rate limiting behavior

---

**Status**: âœ… **READY FOR MERGE** (pending human review)

---
*Generated by Danger.js - Automated PR Analysis System*
*Generated at: 2026-02-18 10:30:45 UTC*

---

## Example 2: Failing PR with Multiple Issues

### PR Information
- **Title:** Fix bug
- **Author:** @developer2
- **Related Issues:** None specified
- **Files Changed:** 15
- **Lines Added**: 892
- **Lines Deleted**: 156

### Automated Requirements Analysis Report

#### ğŸ“Š Change Statistics

- **Files Changed**: 15
- **Lines Added**: 892
- **Lines Deleted**: 156
- **Test Files**: 0
- **Documentation Files**: 0

#### âŒ Requirements Checklist

- âŒ **Linked to Issues**: No issue linkage found
- âŒ **Uses shared packages only**: [VIOLATION DETECTED]
- âœ… **Proper package imports** (@iiskills/ui): 3 proper imports found
- âŒ **No .env files committed**: [VIOLATION DETECTED]
- âœ… **No prohibited patterns**: [OK]
- âŒ **Tests included**: No test files updated
- âš ï¸ **E2E/regression tests**: Skipped (no tests added)
- âœ… **Code quality**: ESLint passed, Prettier failed
- âŒ **Security scan**: 2 high vulnerabilities found
- âœ… **Configuration validation**: [OK]
- âŒ **Screenshot diffs**: UI changes detected but no screenshots
- â³ **Manual review**: [BLOCKED]

#### ğŸš¨ Critical Issues Found

**1. PR Description Too Short**
```
âŒ PR title is only 7 characters
âŒ PR description is missing or too short
âŒ No issue linkage found (use "Closes #123")
```

**2. Local Component Imports Detected**
```
âŒ apps/learn-math/pages/dashboard.js
   Line: import Button from '../../components/shared/Button';
   
âŒ apps/learn-math/pages/profile.js
   Line: import Card from '../../components/shared/Card';
   
âŒ apps/learn-physics/pages/lessons.js
   Line: import Layout from '../../components/shared/Layout';

ğŸ”§ FIX: Replace with:
   import { Button, Card, Layout } from '@iiskills/ui/common';
```

**3. Security Vulnerabilities**
```
âŒ 2 high severity vulnerabilities found in dependencies
   - lodash: Prototype Pollution (update to >=4.17.21)
   - axios: SSRF vulnerability (update to >=1.6.0)

ğŸ”§ FIX: Run 'yarn upgrade lodash axios'
```

**4. Hardcoded Secrets Detected**
```
âŒ apps/main/lib/config.js:24
   Line: const API_KEY = 'sk_live_abc123xyz...';
   
ğŸ”§ FIX: Move to environment variables
```

**5. .env File Committed**
```
âŒ apps/learn-math/.env
   This file should NEVER be committed
   
ğŸ”§ FIX: 
   git rm apps/learn-math/.env
   Use .env.example instead
```

**6. No Tests Added**
```
âš ï¸ 892 lines of code added but no tests updated
   This significantly increases regression risk
   
ğŸ”§ FIX: Add unit and E2E tests for changes
```

**7. UI Changes Without Screenshots**
```
âŒ Detected changes in:
   - apps/learn-math/pages/dashboard.js
   - apps/learn-math/components/UserCard.js
   - styles/globals.css
   
   But no screenshots found in PR description
   
ğŸ”§ FIX: Run './capture-qa-screenshots.sh' and attach results
```

**8. Code Quality Issues**
```
âŒ Prettier formatting: 8 files not formatted
âš ï¸ Found 15 console.log statements
âš ï¸ Found 8 TODO comments

ğŸ”§ FIX: Run 'yarn lint:fix && yarn format'
```

**9. Large PR Warning**
```
âš ï¸ This PR changes 1,048 lines across 15 files
   Consider breaking into smaller PRs for easier review
```

#### ğŸ’¡ Recommendations

âŒ **Critical Issues Detected** - This PR cannot be merged in its current state.

**Required Actions (Blockers):**
1. Fix all local component imports to use @iiskills/ui
2. Remove .env file from commit
3. Remove hardcoded secrets
4. Fix security vulnerabilities
5. Add screenshots for UI changes
6. Add tests for changed functionality
7. Link to relevant issues

**Recommended Actions:**
1. Run code formatting: `yarn lint:fix && yarn format`
2. Remove debug console.log statements
3. Break PR into smaller chunks if possible
4. Update documentation

#### ğŸš€ Next Steps

1. âŒ **STOP** - Do not request review yet
2. ğŸ”§ Address all critical issues marked with âŒ
3. âš ï¸ Address warnings marked with âš ï¸
4. âœ… Re-run automated checks locally:
   ```bash
   yarn lint:check
   yarn test
   yarn test:e2e
   yarn validate-config
   ```
5. ğŸ”„ Push fixes and wait for green checks
6. ğŸ“ Then request human review

#### ğŸ“‹ Checklist for Author

Before requesting review:
- [ ] Fix local component imports
- [ ] Remove .env file from git
- [ ] Move secrets to environment variables
- [ ] Update vulnerable dependencies
- [ ] Add unit tests
- [ ] Add E2E tests
- [ ] Generate and attach screenshots
- [ ] Link to relevant issues
- [ ] Run prettier formatting
- [ ] Remove console.log statements
- [ ] Break PR into smaller chunks (optional)

---

**Status**: âŒ **BLOCKED - Cannot Merge**

**Blocking Issues**: 8  
**Warnings**: 3  
**Estimated Fix Time**: 2-4 hours

---
*Generated by Danger.js - Automated PR Analysis System*
*Generated at: 2026-02-18 10:35:22 UTC*

---

## Example 3: Passing PR with UI Changes

### PR Information
- **Title:** Redesign payment confirmation page with improved UX
- **Author:** @uxdesigner
- **Related Issues:** Closes #567, Related to #545
- **Files Changed:** 12
- **Lines Added**: 456
- **Lines Deleted**: 234

### Automated Requirements Analysis Report

#### ğŸ“Š Change Statistics

- **Files Changed**: 12
- **Lines Added**: 456
- **Lines Deleted**: 234
- **Test Files**: 4
- **Documentation Files**: 1

#### âœ… Requirements Checklist

- âœ… **Linked to Issues**: #567, #545 [OK]
- âœ… **Uses shared packages only**: [OK]
- âœ… **Proper package imports** (@iiskills/ui): 18 proper imports found
- âœ… **No .env files committed**: [OK]
- âœ… **No prohibited patterns**: [OK]
- âœ… **Tests included**: 4 test files updated
- âœ… **E2E/regression tests**: All 32 tests passed
- âœ… **Code quality**: ESLint & Prettier passed
- âœ… **Security scan**: No vulnerabilities found
- âœ… **Configuration validation**: [OK]
- âœ… **Screenshot diffs**: âœ… Screenshots attached [OK]
- âœ… **Visual regression tests**: All snapshots updated and approved
- âœ… **Accessibility**: WCAG 2.1 AA compliance verified
- âœ… **Manual review**: [PENDING]

#### ğŸ¨ Visual Changes Analysis

**UI Files Modified:**
```
âœ… packages/ui/src/payment/PaymentConfirmation.js
âœ… packages/ui/src/payment/PaymentSummary.js
âœ… packages/ui/src/common/Button.js (enhanced)
âœ… styles/payment.css
```

**Screenshots Provided:**
```
âœ… Desktop (1920x1080)
   - Before: payment-confirmation-desktop-before.png
   - After: payment-confirmation-desktop-after.png
   
âœ… Tablet (768x1024)
   - Before: payment-confirmation-tablet-before.png
   - After: payment-confirmation-tablet-after.png
   
âœ… Mobile (375x667)
   - Before: payment-confirmation-mobile-before.png
   - After: payment-confirmation-mobile-after.png
```

**Visual Regression Status:**
```
âœ… Playwright snapshots updated
âœ… All visual tests passing
âœ… No unexpected visual changes detected
```

**Accessibility Verification:**
```
âœ… Color contrast: 4.5:1 (WCAG AA)
âœ… Keyboard navigation: Full support
âœ… Screen reader: Properly labeled
âœ… Focus indicators: Visible
âœ… Form validation: Accessible errors
```

#### ğŸ¯ Detailed Analysis

**Design Review:**
```
âœ… Design system colors used correctly
âœ… Spacing follows 8px grid system
âœ… Typography scale consistent
âœ… Component reusability maintained
âœ… Mobile-first approach applied
```

**Performance:**
```
âœ… No new heavy dependencies added
âœ… CSS optimized (reduced by 12KB)
âœ… Images properly optimized
âœ… No layout shift introduced
```

**Test Coverage:**
```
âœ… Unit tests: 45 passed (payment flows)
âœ… E2E tests: 32 passed (full checkout flow)
âœ… Visual tests: 18 snapshots verified
âœ… Accessibility tests: 12 passed
```

#### ğŸ’¡ Recommendations

âœ¨ **Excellent!** This PR demonstrates best practices for UI changes.

**Highlights:**
- Comprehensive visual documentation
- Strong test coverage (unit + E2E + visual)
- Accessibility standards met
- Performance maintained
- Proper component reusability

**Minor Suggestions:**
- Consider adding a loading skeleton for slow connections
- Document the new payment flow in user guide

#### ğŸš€ Next Steps

1. âœ… All automated checks passed
2. âœ… Visual regression approved
3. âœ… Accessibility verified
4. â³ Awaiting design team approval
5. â³ Awaiting developer review

#### ğŸ“ Reviewer Guidance

This PR is ready for review. Please focus on:
- Verify payment flow edge cases
- Test error states (declined card, timeout, etc.)
- Confirm confirmation email is sent correctly
- Test on actual mobile devices if possible
- Verify analytics tracking works

---

**Status**: âœ… **READY FOR MERGE** (pending approvals)

**Approvals Required:**
- â³ Design Team (for UI changes)
- â³ Senior Developer (code review)

---
*Generated by Danger.js - Automated PR Analysis System*
*Generated at: 2026-02-18 11:15:33 UTC*

---

## Key Takeaways

### What Makes a Good PR?

1. âœ… **Clear title and description** - Explains what and why
2. âœ… **Issue linkage** - Traces back to requirements
3. âœ… **Proper imports** - Uses shared packages
4. âœ… **Comprehensive tests** - Unit, E2E, visual
5. âœ… **Documentation** - Screenshots, updated docs
6. âœ… **Security** - No secrets, vulnerabilities fixed
7. âœ… **Code quality** - Linted, formatted, reviewed

### Common Pitfalls to Avoid

1. âŒ **No description** - Use the template
2. âŒ **Local imports** - Use @iiskills/ui instead
3. âŒ **No tests** - Always add tests
4. âŒ **Committing .env** - Use .env.example
5. âŒ **No screenshots** - Required for UI changes
6. âŒ **Large PRs** - Break into smaller chunks
7. âŒ **Hardcoded secrets** - Use environment variables

---

**For more information, see:**
- [PR Requirements Guide](PR_REQUIREMENTS_GUIDE.md)
- [Contributing Guidelines](../CONTRIBUTING.md)
- [Deployment Policy](../DEPLOYMENT_POLICY.md)
